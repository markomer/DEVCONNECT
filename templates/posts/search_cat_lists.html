{% extends 'base.html' %} 

{% block title %}Search Cat Lists{% endblock title %}

{% block content %}

<option placeholder>Search Posts by Dev Category</option>
<option >all</option>
<option >professional-all</option>
<option >professional-frontend</option>
<option >professional-backend</option>
<option >professional-frontend</option>
<option >professional-fullstack</option>
<option >hobbiest-all</option>
<option >hobbiest-frontend</option>
<option >hobbiest-backend</option>
<option >hobbiest-fullstack</option>
<option >instructor-all</option>
<option >instructor-frontend</option>
<option >instructor-backend</option>
<option >instructor-fullstack</option>

kljgslerji;loj

=================================
from list.html
=================================
{% block content %} 
<div class="post-list-title-block">
    <h1 class="post-list-title">Posts</h1>
    <form class="d-flex" method=POST action="{% url 'search_post_cats' %}">
        {% csrf_token %} 
        <select class="form-select exact" placeholder="Search Posts by Prof Category" aria-label="Default select collapseExample" name="searched">
            <option placeholder>Search Posts By Prof Categories</option>
            <option >all</option>
            <option >allprof</option>
            <option >professional</option>
            <option >hobbiest</option>
            <option >instructor</option>
        </select>
        <select class="form-select exact" placeholder="Search Posts by Dev Category" aria-label="Default select collapseExample" name="searchedAgain">
            <option placeholder>Search Posts By Dev Categories</option>
            <option >all</option>
            <option >alldev</option>
            <option >frontend</option>
            <option >backend</option>
            <option >fullstack</option>
        </select>
        <button class="btn btn-outline-success" type="submit">Search</button>
    </form>
</div>  

=================================
from search_post_cats.html
=================================
{% block content %} 
  <div><br>
    {% if searched %}
      <div class="cat-and-search-line">
        <div class="cat-and-search">
          <h6 class="cat-label">CURRENT CATEGORY: </h6>
          <h4> '{{ searched }} - {{ searchedAgain }}' </h4>
        </div>
        <form class="d-flex" method=POST action="{% url 'search_post_cats' %}">
          {% csrf_token %} 
          <input class="form-control" type="search" placeholder="Search Posts by Category" aria-label="Search" name="searched">
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form>

        <a href="{% url 'post_list' %}" class="btn btn-secondary bg-white text-black">
          Back to Posts List
        </a>

      </div> 
      {% for post in posts %}
        <div class="card my-3 rounded bg-light shadow">
          <div class="card-body">
            <div class="card">
              <div class="card-header">
                <h5 class="card-title m-0">{{ post.author }} - {{ post.date_created|timesince }} ago</h5>
                <div class="post-cat-label">
                  <h7>Category:</h7>
                  <h7 class="post-category">{{ post.prof_category}} - {{ post.dev_category}}</h7>
                </div>
              </div>

              <div class="card-body p-3">
                <p class="card-text">{{ post.body|truncatechars:200 }}</p>

                <div class="collapse" id="collapseExample">
                  <p class="card-text"> {{ post.body }} (test text) </p>
                </div>
                <p>
                  <a class="btn btn-light btn-sm" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                    Read Full Post
                  </a>
                  <a class="btn btn-light btn-sm" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                      Close Full Post

====================================
from posts/views.py
====================================
def search_post_cats(request):
  if request.method == "POST":
    searched = request.POST.get('searched')
    searchedAgain = request.POST.get('searchedAgain')
    posts = [Q(prof_category__icontains=searched), Q(dev_category__icontains=searchedAgain)]
    Post.objects.filter(reduce(operator.or_, posts))
    return render(request, 'posts/search_post_cats.html', {'searched':searched, 'searchedAgain':searchedAgain, 'posts':posts})
  else:
    return render(request, 'posts/search_post_cats.html', {})



    


{% endblock content %} 

<!--{% block main_content %}
    <form method="post" action="">
        {% csrf_token %}

        <label for="prof_cats_search">Professional Categories:</label>
        <input type="text" name="prof_cats_search" id="prof_cats_search">

        <label for="dev_cats_search">Development Categories:</label>
        <input type="text" name="dev_cats_search" id="dev_cats_search">

    </form>
    <div id="result_panel">
        {% if table %}
            {% render_table table %}
        {% else %}
            {% if no_results %}
                No results returned for <q>{{ no_results }}</q>
            {% else %}
                Please enter a search
            {% endif %}
        {% endif %}
{% endblock %}-->

def search_post_cats(request):
  if request.method == "POST":
    searched = request.POST.get('searched')
    profPosts = Post.objects.filter(Q(prof_category__icontains=searched)) #| Q(dev_category__icontains=searched))
    return render(request, 'posts/search_post_cats.html', {'searched':searched,'posts':profPosts})
  if request.method == "POST":
    searched = request.POST.get('searched')
    devPosts = Post.objects.filter(Q(dev_category__icontains=searched)) #| Q(dev_category__icontains=searched))
    return render(request, 'posts/search_post_cats.html', {'searched':searched,'posts':devPosts})
  else:
    return render(request, 'posts/search_post_cats.html', {})



    elif profPosts is not None:
    if request.method == "POST":
      searchedAgain = request.POST.get('searchedAgain')
      bothPosts = Post.objects.filter(Q(dev_category__icontains=searchedAgain))
      return render(request, 'posts/search_post_cats.html', {'searchedAgain':searchedAgain,'posts':bothPosts})


